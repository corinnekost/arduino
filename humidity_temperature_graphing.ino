#include "arduino_secrets.h"
	
/* 
  Sketch generated by the Arduino IoT Cloud Thing "EIoTK_Activity_02"
  https://create.arduino.cc/cloud/things/eeb745e3-8a83-499b-94f5-b198740e4199 
  
  Arduino IoT Cloud Properties description
  
  The following variables are automatically generated and updated when changes are made to the Thing properties
  
  float humidity;
  float temperature;
  
  Properties which are marked as READ/WRITE in the Cloud Thing will also have functions
  which are called when their values are changed from the Dashboard.
  These functions are generated with the Thing and added at the end of this sketch.
*/

#include "thingProperties.h"
#include <Arduino_MKRIoTCarrier.h>
MKRIoTCarrier carrier;
void setup() {
  // Initialize serial
  Serial.begin(9600);
  // Defined in thingProperties.h
  initProperties();
  
  // Connect to Arduino IoT Cloud
  ArduinoCloud.begin(ArduinoIoTPreferredConnection);
  CARRIER_CASE = false;
  carrier.begin();
  
  //Get Cloud Info/errors , 0 (only errors) up to 4
  setDebugMessageLevel(4);
  ArduinoCloud.printDebugInfo();
  
  //Wait to get cloud connection to init the carrier
  while (ArduinoCloud.connected() != 1) {
    ArduinoCloud.update();
    carrier.display.setTextSize(3);
    carrier.display.setCursor(20, 70);
    carrier.display.println("Waiting For");
    carrier.display.setCursor(5, 110);
    carrier.display.println("Connection...");
    delay(500);
  }
}
	
void loop() {
  ArduinoCloud.update();
  // Your code here 
  temperature = carrier.Env.readTemperature();
  humidity = carrier.Env.readHumidity();
  
  Serial.print(temperature);
  Serial.print(",");
  Serial.println(humidity);
  
  delay(1000); 
}